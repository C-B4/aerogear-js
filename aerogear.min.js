/* Need to add license, description, etc. */(function(e,t){var n=e.aerogear={}})(this);(function(e,t){function n(e){return{}.toString.call(e)==="[object Array]"}e.pipeline=function(t){var r={};r.add=function(t){var i,s,o=r.pipes=r.pipes||{};if(typeof t=="string")o[t]=e.pipeline.adapters.rest(t);else if(n(t))for(i=0;i<t.length;i++){s=t[i];typeof s=="string"?o[s]=e.pipeline.adapters.rest(s):o[s.name]=e.pipeline.adapters[s.type||"rest"](s.name,s.recordId||"id",s.settings||{})}else{if(!t)throw"aerogear.pipeline: pipe is undefined";o[t.name]=e.pipeline.adapters[t.type||"rest"](t.name,t.recordId||"id",t.settings||{})}r.pipes=o;return r};r.remove=function(e){var t,i,s=r.pipes=r.pipes||{};if(typeof e=="string")delete s[e];else if(n(e))for(t=0;t<e.length;t++){i=e[t];typeof i=="string"?delete s[i]:delete s[i.name]}else e&&delete s[e.name];r.pipes=s;return r};return r.add(t)};e.pipeline.adapters={}})(aerogear);(function(e,t,n){e.pipeline.adapters.rest=function(e,n,r){r=t.extend({url:e},r);return{recordId:n,type:"rest",read:function(e){var n;if(e){e.ajax&&e.ajax.data?n=e.ajax.data:e.data&&(n=e.data);n&&(e.ajax.data=n)}else e={};return t.ajax(t.extend({},r,{type:"GET"},e.ajax||{}))},save:function(e,i){i=i||{};return t.ajax(t.extend({},r,{type:e[n]?"PUT":"POST",data:e},i.ajax||{}))},"delete":function(e){var n;e=e||{};typeof e.record=="string"||typeof e.record=="number"?n={id:e.record}:n=e.record;return t.ajax(t.extend({},r,{type:"DELETE",data:n},e.ajax||{}))}}}})(aerogear,jQuery);